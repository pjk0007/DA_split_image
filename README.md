# 🖼️ 상세페이지 자동 섹션 분할기

이 프로젝트는 긴 상세페이지 이미지를 자동으로 시각적 "섹션" 단위로 분할하는 도구입니다.  
현재는 **색상 기반 분할 방식**이 구현되어 있으며, 향후 **오브젝트 기반 분할**, **레이아웃 기반 분석** 등이 추가될 예정입니다.

---

## 📌 기능 개요

- 🎨 **색상 변화 기반 분할**  
  이미지의 세로 방향으로 색상 변화를 감지하여 빠르게 섹션을 나눕니다.  
  구조가 단순한 상세페이지에서는 효과적이지만, 일러스트나 복잡한 배경이 포함되면 의미 있는 구분이 어려울 수 있습니다.

- 📏 **공백 감지 기반 분할**  
  배경색이 일정하고 수직 방향으로 충분한 공백이 있는 영역을 경계로 판단합니다.  
  제품 이미지와 텍스트 사이에 여백이 뚜렷한 상세페이지에서 유용합니다.

- 🖌 **배경색 변화 기반 분할**  
  엣지(경계선) 추출 후, 같은 배경을 공유하는 영역끼리 라벨링하여 구간을 분리합니다.  
  왼쪽부터 오른쪽까지 이어지는 배경을 기준으로 하기 때문에, 시각적으로 독립적인 영역을 효과적으로 분리할 수 있습니다.

---

## 🛠️ 설치

```bash
# 필수 라이브러리 설치
pip install -r requirements.txt
```

---

## 🚀 실행 방법

```bash
python app.py
```

### 🔧 이미지 파일 변경
`app.py` 내 `image_path` 값을 원하는 이미지로 바꿔주세요.

```python
image_path = '상페-딱딱이복숭아.png'
```

---

## 🔍 구현된 분할 방법

1. **색상 변화 기반 (`split_by_color`)**  
   - 각 행의 평균 색상값을 비교하여 변화량이 일정 기준(threshold)을 넘으면 경계로 인식  
   - 빠르고 단순하지만, 복잡한 이미지에서는 오탐지 가능

2. **공백 감지 기반**  
   - 엣지 검출 없이 동일 배경색이 일정 높이 이상 반복되는 경우를 경계로 판단  
   - 텍스트·이미지 블록 간 여백이 확실한 경우 높은 정확도

3. **배경색 변화 기반**  
   - `cv2.Canny`로 엣지 추출 → `cv2.connectedComponentsWithStats`로 연결된 배경 라벨링  
   - 화면 전체 너비를 가로지르는 배경만 추출해 섹션 경계로 사용

---

## 🧪 개발 히스토리 요약

| 시도 방법            | 결과 및 한계 |
|----------------------|--------------|
| 색상 변화 기반 분할   | 빠르고 단순함. 하지만 일러스트 포함 시 색상만으로는 의미 구분이 어려움 |
| 공백 감지 기반 분할   | 배경색이 같고 공백이 길면 섹션이 나누어 진다고 가정.  |
| 배경색 변화 기반 분할 | 엣지 추출 후 같은 배경끼리 라벨링 후 같은 배경끼리 분할 |

---

## 📌 TODO

- [x] 색상 변화 기반 분할
- [x] 공백 감지 기반 분할
- [x] 배경색 변화 기반 분할
- [ ] 분할로직 파이프라인 구성

---

## 📃 라이선스

MIT License  
이미지 및 샘플 데이터는 사용자 본인이 제공한 자료를 기준으로 사용됩니다.

---

## 🙋‍♂️ 제작자

- 개발 및 기획: pjk0007
- 문의: jake.ppjk@gmail.com
